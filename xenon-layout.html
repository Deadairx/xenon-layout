<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icon/iron-icon.html"/>
<link rel="import" href="../iron-icons/iron-icons.html"/>
<dom-module id="xenon-layout">
    <template>
        <style>
            :host { font-family: Roboto, Arial, Helvetica, sans-serif }
            #body { height:100%; box-sizing: border-box; position:relative; }
            #main { z-index: 0; background-color: whitesmoke; position:absolute; overflow-y: scroll; overflow-x: hidden; height:100%; width:inherit; box-sizing: border-box; }
            #header { z-index: 10; position:absolute; top:0px; width: inherit; display:flex; align-items: center; box-sizing: border-box; box-shadow: 0px 0px 2px #000 }
            #footer { z-index: 10; position:absolute; bottom: 0px; width: inherit; box-shadow: 0px 0px 2px #000 }
            #nav { z-index:100; position:absolute; height:100%; width:250px; }
            #header ::content { z-index:10; padding: 24px; background-color: darkslateblue; color:white; font-weight: 100; }
            #footer ::content > * { z-index:10; padding: 4px 16px 8px 16px; background-color: lightgray; overflow-x:hidden; }
            #nav ::content > * { z-index:100; padding: 16px; background-color: white; box-sizing: border-box; height:100%; box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5); }
            #main ::content > * { z-index: 0; padding:16px; max-width:1000px; margin:auto; }
            .titletext { flex: 1 1 auto; }
            #header iron-icon { margin-right:16px; }
        </style>

       <div id="nav">
           <content select="nav"></content>
       </div>
        <div id="body">
            <div id="header">
                <iron-icon id="menuicon" icon="menu" on-tap="showNav"></iron-icon>
                <div class="titletext">{{titletext}}</div>
                <content select="header"></content>
            </div>
            <div id="main">
                <content select="main"></content>
            </div>
            <div id="footer">
                <content select="footer"></content>
            </div>
        </div>
        

    </template>
    <script>
        Polymer({
            is: "xenon-layout", 
            properties: {
                titletext: String
            },      
            ready: function() {
                this.listen(window, "resize", "redraw");
            },
            attached: function() {
                this.redraw();
            },
            // show nav panel when the screen is mobile size
            showNav: function() {
                this.$.nav.hidden = false;
            },
            // hide the nav panel when screen is mobile size
            hideNav: function() {
                this.$.nav.hidden = true;
            },
            // rearrange the nav bar, header, and footer
            redraw: function() {
                var navwidth = 250; 
                var width = window.innerWidth;
                this.$.nav.style.width = navwidth;
                if(width < 650) {
                    this.$.body.style.marginLeft = 0;
                    this.$.body.style.width = width;
                    this.$.nav.hidden = true;
                    this.$.menuicon.hidden = false;
                } else {
                    this.$.body.style.marginLeft = navwidth;
                    this.$.body.style.width = width - navwidth;
                    this.$.nav.hidden = false;
                    this.$.menuicon.hidden = true;
                }
                this.$.main.style.top = this.$.header.offsetHeight;
                this.$.main.style.height = window.innerHeight - this.$.header.offsetHeight - this.$.footer.offsetHeight;
            }
        })
    </script>
</dom-module>


        
