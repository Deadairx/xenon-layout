<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icon/iron-icon.html"/>
<link rel="import" href="../iron-icons/iron-icons.html"/>
<dom-module id="xenon-layout">
    <template>
        <style>
            #wrapper { height:100%; display:flex; flex-direction: column; margin-left:250px;}
            #main { z-index: 0; flex: 1 1 auto; overflow-y:scroll; background-color:whitesmoke; }
            #scrim { z-index: 20; position:absolute; height:100%; width:250px; background-color: rgba(0,0,0,0.2); }
            #nav { width: 250px; background-color:gainsboro; height:100%; box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5); }
            #head { z-index: 10; background-color:darkslateblue; color:white; flex: 0 0 72px; display:flex; align-items:center; padding-left: 12px; padding-right:12px;} 
            #foot { z-index: 10; background-color:gainsboro; }
            #titletext { flex: 1 1 auto; margin-left:8px; }

            @media only screen and (max-width: 650px) {
                #scrim { width:100%; }
                #wrapper { margin-left: 0px; }
            }
        </style>
        <div id="scrim" on-tap="navTap">
            <div id="nav">
                <content select="nav"></content>
            </div>
        </div>
        <div id="wrapper">
            <div id="head">
                <iron-icon icon="menu" on-tap="showNav"></iron-icon>
                <div id="titletext">{{titleText}}</div>
                <content select="header"></content>
            </div>
            <div id="main">
                <content select="main"></content>
            </div>
            <div id="foot">
                <content select="footer"></content>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: "xenon-layout", 
            properties: {
                titleText: String
            },
            ready: function() {
                this.listen(window, "resize", "redraw");
                this.redraw();
            },
            /* show the left nav when it's collapsed */
            showNav: function() {
                this.$.scrim.style.display = "block";
            }, 
            /* hide the left nav when it's shown if screen is small */
            hideNav: function() {
                this.$.scrim.style.display = "none";
            },
            /* when a nav item is tapped */
            navTap: function() {
                var width = window.innerWidth;
                if(width <= 650) this.hideNav();
            },
            /* redraw when necessary */
            redraw: function() {
                var width = window.innerWidth;
                if(width > 650) {
                    this.showNav();
                } else {
                    this.hideNav();
                }
                
            }
        });
    </script>
</dom-module>