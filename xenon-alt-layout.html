<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icons/iron-icons.html"/>
<link rel="import" href="../iron-icon/iron-icon.html"/>
<dom-module id="xenon-alt-layout">
    <template>
        <style>
            #bodywrap { display: flex; flex-direction:column; height:100%; background-color:whitesmoke; }
            #titletext { flex: 1 1 auto; }
            #main { padding-left: 250px; display:flex; flex: 1 1 auto; align-items:stretch; overflow-y:scroll }
            #header { background-color: var(--xenon-layout-background-color, slategray); color: var(--xenon-layout-color, white); box-sizing: border-box; padding:0px 8px 0px 8px; z-index:100; flex: 0 0 60px; align-items: center; display:flex; justify-content:center; box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5); }
            #header > * { padding: 4px; }
            #body { display:flex; align-items: stretch; justify-content: center; flex: 1 1 auto; }
            #nav { z-index: 100; position:absolute; top:60px; width:250px; bottom: 0px; background-color:whitesmoke }
            :host ::content nav { height:100% }
            #content { flex: 1 1 auto; }
            :host ::content main { margin: auto; }
        </style> 
        <div id="nav">
            <content select="nav"></content>
        </div>
        <div id="bodywrap">
            <div id="header">
                <iron-icon id="icon" icon="menu" on-click="toggleNav"></iron-icon>
                <div id="titletext">{{titleText}}</div>
                <content select="header"></content>
            </div>
            <div id="main">
                <div id="body">
                    <div id="content"><content select="main"></content></div>
                </div>
            </div>
            <div id="foot">
                <content select="footer"></content>
            </div>
        </div>
    </template>
    <script>
    Polymer({
        is:"xenon-alt-layout", 
        properties: {
            // Text to include in the title bar of the app
            titleText: String, 

            // Keep the nav floating instead of always visible 
            floatNav: { type: Boolean, value: false }
        },
        ready: function() {
            this.listen(window, "resize", "redraw");
            this.redraw();
        },
        /* Show the left nav when in mobile mode. */
        showNav: function() {
            this.$.nav.style.display = "block";
        }, 
        /* Show the left nav when in mobile mode. */
        hideNav: function() {
            this.$.nav.style.display = "none";
        },
        /* Private method to trigger hiding the nav */
        toggleNav: function() {
            if(this.$.nav.style.display == "block" && (window.innerWidth < 650 || this.floatNav)) {
                this.hideNav();
            } else {
                this.showNav();
            }
        },
        /* Method to repaint the navigation and detect mobile or desktop layout. */
        redraw: function() {
            if(this.floatNav) {
                this.$.icon.style.display = "block";
                this.$.nav.style.boxShadow = "0px 0px 4px rgba(0, 0, 0, 0.5)";
                this.$.main.style.paddingLeft = "0px";
                this.hideNav();
            } else {
                if(window.innerWidth < 650) {
                    this.$.icon.style.display = "block";
                    this.$.nav.style.boxShadow = "0px 0px 4px rgba(0, 0, 0, 0.5)";
                    this.$.main.style.paddingLeft = "0px";
                    this.hideNav();
                } else {
                    this.$.icon.style.display = "none";
                    this.$.nav.style.boxShadow = "none";
                    this.$.main.style.paddingLeft = "250px";
                    this.showNav();
                }
            }
        }
    });
    </script>
</dom-module>
